<!doctype html>
<html>
	<head>
		<meta charset="utf-8">

		<title></title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
        <style type="text/css">
        .reveal, .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
            font-family: 'Source Sans Pro', Helvetica, sans-serif;
            text-transform: none;
        }
        
        .reveal section img {
            box-shadow: none;
        }
        </style>
	</head>

	<body>

		<div class="reveal">
			<div class="slides">

<section data-markdown>
<script type="text/template">
# Python 在数据探索性<br>分析中的应用
</script>
</section>

<section data-markdown>
<script type="text/template">
## Outline

- 简介
- 基础
- 问题
- 实践
</script>
</section>


<section data-markdown>
<script type="text/template">

## About Me

</script>
</section>

<section data-markdown>
<script type="text/template">
## Introduction

对于数据分析工作而言，初期对于数据集的探索性分析，以及对于其中业务的理解是非常重要的工作，一般情况这个工作甚至能到占整个数据分析任务 70% 的时间。
</script>
</section>

<section data-markdown>
<script type="text/template">
## 为什么用 Python

- 简单
  - 工具齐全
  - 思路明晰
- 统一
- 灵活
</script>
</section>

<section data-markdown>
<script type="text/template">
## 需要的知识储备

- 掌握 Python 语法，熟悉基本使用
- 了解 Python 中相关库的使用

</script>
</section>

<section data-markdown>
<script type="text/template">
## 数据探索性分析

- 如何载入数据？
- 如何改变一个变量的数据类型？
- 如何变换数据集？
- 如何对数据进行排序？
- 如何进行简单的数据可视化？
  - 柱状图
  - 散点图
  - 箱线图

</script>
</section>

<section data-markdown>
<script type="text/template">
## 数据探索性分析

- 如何制作频率分布表？
- 如何对数据进行抽样？
- 如何去掉重复数据？
- 如何分组对变量进行计数、计算均值、累计值？
- 如何处理缺失值？
- 如何合并与关联数据？
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何载入数据？

通常我们都有很多格式的原始数据

- .XLS
- .TXT
- .CSV
- JSON

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何载入数据？

我们使用 Python 中的 Pandas 库来帮助我们操作数据

在读取数据这部分我们可以用到的方法：

- read_csv
    读取逗号分隔格式（csv）的数据

- read_table
    读取使用制表符（tab）格式的数据

- read_excel
    读取 excel 格式的数据

- read_fwf
    读取固定宽度列格式的数据

- read_clipboard
    读取系统剪贴板中的数据
</script>
</section>

<section data-markdown>
<script type="text/template">
#### 读取 CSV 格式数据

代码

```
# 导入 pandas 库
import pandas as pd

# 指定文件路劲
df = pd.read_csv("E:/train.csv")

# 展示前 3 行
print df.head(3)
```

</script>
</section>

<section data-markdown>
<script type="text/template">
#### 读取 CSV 格式数据


结果

![read_csv output](img/read_csv.png)
</script>
</section>

<section data-markdown>
<script type="text/template">
#### 读取 excel 格式数据

代码

```
# 其中 Data 为需要读取的 sheet 名 Data
df=pd.read_excel("E:/EMP.xlsx", "Data")

print df
```

</script>
</section>

<section data-markdown>
<script type="text/template">
#### 读取 excel 格式数据

结果


![read_excel output](img/read_csv.png)

</script>
</section>

<section data-markdown>
<script type="text/template">
#### 读取制表符（tab）分隔格式的数据

*很多日志格式都是这样的格式*

代码

```python
# 载入以制表符分隔格式的数据
df=pd.read_csv(“E:/Test.txt”,sep=’\t’) 

print df
```

</script>
</section>

<section data-markdown>
<script type="text/template">
#### 读取制表符（tab）分隔格式的数据

结果

![read_txt output](img/read_txt.png)
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何改变一个变量的数据类型？

不同数据的类型就有不同的处理方式

所以类型转换很重要
</script>
</section>

<section data-markdown>
<script type="text/template">
#### 基础类型转换

代码

```
# 将数值类型转为字符串
srting_outcome = str(numeric_input)

# 将字符串转换为整型
integer_outcome = int(string_input)

# 将字符串转换为浮点型
float_outcome = float(string_input)
```

在处理 raw_input() 读入的数据尤其有用<br>因为原始读入的类型是字符串。
</script>
</section>

<section data-markdown>
<script type="text/template">
#### 日期处理

使用 strptime 相关方法：

```python
from datetime import datetime
char_date = 'Apr 1 2015 1:20 PM' # 日期字符串
date_obj = datetime.strptime(char_date, '%b %d %Y %I:%M%p')
print date_obj
```

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何变换数据集？

如果我想将 A 表变换为 B 表的形式应该怎么办呢？

![transpose](img/transpose.png)

可以使用 dataframe.pivot 方法
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何变换数据集？

代码

```python
df=pd.read_excel("E:/transpose.xlsx", "Sheet1") # 从 excel 载入数据
print df 
result= df.pivot(index= 'ID', columns='Product', values='Sales') 
result
```

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何变换数据集？

结果

![transpose output](img/transpose_1.png)

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对数据进行排序？

对数据集进行排序可以使用 dataframe.sort() ，你可以根据一个或几个变量进行排序，升序降序可以配置

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对数据进行排序？

代码

```
# 从 excel 载入数据
df=pd.read_excel("E:/transpose.xlsx", "Sheet1") 

# ascending 配置升降序
print df.sort(['Product','Sales'], ascending=[True, False]) 
```
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对数据进行排序？

结果

![sort output](img/sort.png)
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何进行简单的数据可视化？

数据可视化可以更好的帮助你理解数据，是做好数据分析的重要一环。

在 Python 中，我们有 matplotlib、seaborn 可以高效的进行数据可视化实现。
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何进行简单的数据可视化？

现在我们有如下数据：

![sort output](img/sort.png)

我们希望了解：

- 年龄的分布
- 年龄与销售额的关系
- 销售额是否是正态分布


</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何进行简单的数据可视化？

与此相关的基础统计图形：

- 柱状图
- 散点图
- 箱线图
</script>
</section>

<section data-markdown>
<script type="text/template">
#### 柱状图

代码

```
# 载入所需要的库
import matplotlib.pyplot as plt
import pandas as pd

# 从 excel 读入数据
df=pd.read_excel("E:/First.xlsx", "Sheet1")

# 初始化一个画布
fig=plt.figure()

# 在画布上建立一个图形
ax = fig.add_subplot(1,1,1)

# 画柱状图
ax.hist(df['Age'],bins = 5)

# 添加标题、标签
plt.title('Age distribution')
plt.xlabel('Age')
plt.ylabel('#Employee')

# 输出图形
plt.show()
```
</script>
</section>

<section data-markdown>
<script type="text/template">
#### 柱状图

结果

![Hist](img/hist.png)

</script>
</section>

<section data-markdown>
<script type="text/template">
#### 散点图

代码

```
# 初始化一个画布
fig=plt.figure()

# 在画布上建立一个图形
ax = fig.add_subplot(1,1,1)

# 画散点图
ax.scatter(df['Age'],df['Sales'])

# 添加标题、标签
plt.title('Sales and Age distribution')
plt.xlabel('Age')
plt.ylabel('Sales')

# 输出图形
plt.show()
```
</script>
</section>

<section data-markdown>
<script type="text/template">
#### 散点图

结果

![Scatter](img/scatter.png)

</script>
</section>


<section data-markdown>
<script type="text/template">
#### 箱线图

代码

我们使用 seaborn 来画箱线图

```
import seaborn as sns 

sns.boxplot(df['Age']) 
sns.despine()
```
</script>
</section>


<section data-markdown>
<script type="text/template">
#### 箱线图

结果

![Box](img/box.png)
</script>
</section>


<section data-markdown>
<script type="text/template">
### 如何制作频率分布表？

频率分布表可以帮助我们理解分类变量的分布情况

</script>
</section>


<section data-markdown>
<script type="text/template">
### 如何制作频率分布表？

代码

```
import pandas as pd

#读入数据
df=pd.read_excel("E:/First.xlsx", "Sheet1")

# 按照 Gender 与 BMI 进行分组
res = df.groupby(['Gender','BMI'])
res.size()
```

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何制作频率分布表？

结果

![Frequency](img/frequency.png)

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对数据进行抽样？

数据抽样是很多数据分析方法的基本步骤，也可以更好的帮助我们理解大数据集

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对数据进行抽样？

代码

```
# 载入库
import numpy as np
import pandas as pd
from random import sample

# 建立抽象的数据索引列表
rindex = np.array(sample(xrange(len(df)), 5))

# 使用索引列表获取数据
dfr = df.ix[rindex]
print dfr
```

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对数据进行抽样？

结果

![Sample](img/sample.png)

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何去掉重复数据？

去重是我们经常会遇到的问题<br>在 Python 中我们可以这样做

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何去掉重复数据？

代码

```
# 载入 excel 数据
df=pd.read_excel("E:/First.xlsx", "Sheet1") 

# 去掉 Gender 与 BMI 都重复的数据
rem_dup=df.drop_duplicates(['Gender', 'BMI'])
print rem_dup
```

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何去掉重复数据？

结果

![Duplicate](img/duplicate.png)
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对分组变量进行<br>计数、求计算均值、累计值？

很简单，只需要 describe() 方法就可以了

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对分组变量进行<br>计数、求计算均值、分位数？

代码

```
# 按照 Gender 对数据进行分组
res = df.groupby(['Gender'])
res.describe()
```
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何对分组变量进行<br>计数、求计算均值、累计值？

结果

![Group](img/group.png)
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何处理缺失值？


代码

```
df.isnull()
```

结果

![Missing](img/missing.png)

</script>
</section>

<section data-markdown>
<script type="text/template">
#### 使用平均值来插补缺失值

代码

```
import numpy as np

# 计算 age 的平均值
meanAge = np.mean(df.Age)

# 对缺失值进行插补
df.Age = df.Age.fillna(meanAge)
```
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何合并与关联数据？

我们经常会遇到许要将两个数据集按照一定要求合并的问题

比如我们有数据

![Merge data](img/merge_data.png)

如何按照 id 将两个数据集关联起来呢？
</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何合并与关联数据？

代码

```
# 按照两组数据的 id 进行关联数据
res = pd.merge(df1, df2, left_on='id', right_on='id')
```

</script>
</section>

<section data-markdown>
<script type="text/template">
### 如何合并与关联数据？

结果

![Merge data](img/merge.png)

</script>
</section>

<section data-markdown>
<script type="text/template">
## 简单实例

https://github.com/Gwill/slides/blob/gh-pages/data-exploration-with-python/exploration.ipynb

</script>
</section>

<section style="text-align: left;" data-markdown>
<script type="text/template">
# Q & A

</script>
</section>

<section style="text-align: left;" data-markdown>
<script type="text/template">
</script>
<pre><code>
</code></pre>
</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script>
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
                slideNumber: true,

				transition: 'slide', 

				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		</script>
	</body>
</html>
